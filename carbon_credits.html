<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EcoSphere — Carbon Marketplace</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
 body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #ecfdf5, #e0f2fe, #f3e8ff);
      min-height: 100vh;
    }
  .card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    transition: transform .2s;
  }
  .card:hover { transform: translateY(-3px); }

  /* Modal */
  .modal-bg {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
    z-index: 50;
  }
  .modal-card {
    background: white;
    color: #111827;
    padding: 20px;
    border-radius: 12px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.25);
  }
</style>
</head>
<body>

<!-- Header -->
<header class="bg-green-600 text-white p-6 flex justify-between items-center shadow-md">
  <div class="text-2xl font-bold">Carbon Credits</div>
  <nav class="space-x-4">
    <a href="dashboard.html" class="hover:underline">Dashboard</a>
    <a href="rewards.html" class="hover:underline">Rewards</a>
    <a href="scan.html" class="hover:underline">Scan Product</a>
    <a href="suggestions.html" class="hover:underline">Suggestions</a>
    <a href="marketplace.html" class="hover:underline">Marketplace</a>
    <a href="community.html" class="hover:underline">Community</a>
    <a href="carbon_credits.html" class="hover:underline">Carbon Credits</a>
    <a href="family-leaderboard.html" class="hover:underline">Family Leaderboard</a>
  </nav>
</header>

<!-- Main -->
<main class="max-w-6xl mx-auto p-6 space-y-8">

  <h1 class="text-3xl font-bold text-green-700 mb-6">Carbon Credit Marketplace</h1>

  <!-- Marketplace Table -->
  <div class="card overflow-x-auto">
    <table class="min-w-full table-auto">
      <thead class="bg-green-100 text-green-900">
        <tr>
          <th class="px-4 py-2">Seller</th>
          <th class="px-4 py-2">Credits (kg CO₂)</th>
          <th class="px-4 py-2">Price per Credit ($)</th>
          <th class="px-4 py-2">Action</th>
        </tr>
      </thead>
      <tbody id="marketplace-body">
        <!-- Dynamic rows go here -->
      </tbody>
    </table>
  </div>

  <!-- Add Credit Listing -->
  <div class="card">
    <h2 class="text-xl font-semibold mb-4">Sell Your Carbon Credits</h2>
    <div class="grid md:grid-cols-4 gap-4">
      <input type="text" id="sellerName" placeholder="Your Name" class="border p-2 rounded" />
      <input type="number" id="creditsAmount" placeholder="Credits (kg CO₂)" class="border p-2 rounded" />
      <input type="number" id="pricePerCredit" placeholder="Price per Credit ($)" class="border p-2 rounded" />
      <button onclick="addListing()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">List Credits</button>
    </div>
  </div>

</main>

<!-- Buy Modal -->
<div id="buyModal" class="modal-bg flex">
  <div class="modal-card">
    <h2 class="text-xl font-bold mb-2">Buy Carbon Credits</h2>
    <p id="modal-info"></p>
    <input type="number" id="buyAmount" placeholder="Amount of Credits" class="border p-2 rounded w-full mt-2"/>
    <button onclick="confirmPurchase()" class="bg-green-600 text-white px-4 py-2 rounded mt-4 w-full hover:bg-green-700">Confirm Purchase</button>
    <button onclick="closeModal('buyModal')" class="bg-gray-300 text-gray-700 px-4 py-2 rounded mt-2 w-full hover:bg-gray-400">Cancel</button>
  </div>
</div>

<script>
  const marketplace = [
    { seller: "Ram", credits: 100, price: 2 },
    { seller: "Ayushi", credits: 50, price: 1.5 },
    { seller: "Sahil", credits: 75, price: 2.2 }
  ];

  let selectedListing = null;

  function renderMarketplace() {
    const tbody = document.getElementById('marketplace-body');
    tbody.innerHTML = '';
    marketplace.forEach((listing, index) => {
      const row = document.createElement('tr');
      row.className = "text-center border-b";
      row.innerHTML = `
        <td class="px-4 py-2">${listing.seller}</td>
        <td class="px-4 py-2">${listing.credits}</td>
        <td class="px-4 py-2">$${listing.price.toFixed(2)}</td>
        <td class="px-4 py-2">
          <button onclick="openBuyModal(${index})" class="bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">Buy</button>
        </td>
      `;
      tbody.appendChild(row);
    });
  }

  function addListing() {
    const seller = document.getElementById('sellerName').value;
    const credits = parseFloat(document.getElementById('creditsAmount').value);
    const price = parseFloat(document.getElementById('pricePerCredit').value);

    if (!seller || !credits || credits <= 0 || !price || price <= 0) return alert("Enter valid data!");
    marketplace.push({ seller, credits, price });
    renderMarketplace();

    document.getElementById('sellerName').value = '';
    document.getElementById('creditsAmount').value = '';
    document.getElementById('pricePerCredit').value = '';
  }

  function openBuyModal(index) {
    selectedListing = marketplace[index];
    document.getElementById('modal-info').textContent = `Buying from ${selectedListing.seller} - ${selectedListing.credits} credits available at $${selectedListing.price.toFixed(2)} each`;
    document.getElementById('buyModal').style.display = 'flex';
  }

  function closeModal(id) {
    document.getElementById(id).style.display = 'none';
  }

  function confirmPurchase() {
    const amount = parseFloat(document.getElementById('buyAmount').value);
    if (!amount || amount <= 0 || amount > selectedListing.credits) return alert("Enter a valid amount!");
    alert(`You purchased ${amount} credits from ${selectedListing.seller} for $${(amount*selectedListing.price).toFixed(2)}!`);
    selectedListing.credits -= amount;
    document.getElementById('buyAmount').value = '';
    closeModal('buyModal');
    renderMarketplace();
  }

  renderMarketplace();
</script>
<footer class="bg-green-700 text-white text-center py-6 mt-12">
    <p>© 2025 EcoSphere. All rights reserved.</p>
</footer>
</body>
</html>


