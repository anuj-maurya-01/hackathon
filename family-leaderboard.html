<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Family Carbon Input</title>

<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Inter', sans-serif;
  min-height: 100vh;
  background: linear-gradient(270deg, #f0fdf4, #d0f0f6, #e0f8e9, #d9f0ff);
  background-size: 800% 800%;
  animation: gradientAnimation 25s ease infinite;
}
@keyframes gradientAnimation {
  0% {background-position:0% 50%;}
  50% {background-position:100% 50%;}
  100% {background-position:0% 50%;}
}
h1 { text-align: center; font-size: 2rem; font-weight: 700; color: #065f46; margin: 2rem 0; }
.card { background: #ffffff; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; }
.card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 15px 40px rgba(0,0,0,0.15); }
input[type="text"], input[type="number"] {
  width: 100%;
  padding: 0.5rem; border: 2px solid #d1d5db; border-radius: 0.5rem; transition: all 0.3s ease;
}
input:focus { border-color: #10b981; box-shadow: 0 4px 12px rgba(16,185,129,0.3); }
button { transition: all 0.3s ease; }
button:hover { transform: scale(1.05); }
.add-btn { background: #10b981; color: white; padding: 0.5rem 1rem; border-radius: 0.75rem; font-weight: 600; }
.remove-btn { background: #ef4444; color: white; padding: 0.25rem 0.75rem; border-radius: 0.5rem; font-weight: 600; }
.total-co2 { font-size: 1.25rem; font-weight: 700; color: #065f46; text-align: center; margin-top: 1rem; }
</style>
</head>
<body>

<h1>Family Member Carbon Input</h1>
<!-- Add this at the top or bottom inside your container -->
<div class="flex justify-end mb-4">
  <a href="dashboard.html" class="px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 transition">
    Go to Dashboard
  </a>
</div>


<div class="max-w-3xl mx-auto px-4 space-y-6">

  <!-- Add new member -->
  <div class="card space-y-3">
    <h2 class="font-semibold text-green-700 text-xl">Add New Family Member</h2>
    <input type="text" id="member-name" placeholder="Member Name">
    
    <div id="items-container" class="space-y-2">
      <div class="flex gap-2">
        <input type="text" placeholder="Item Name (e.g., Electricity)" class="item-name">
        <input type="number" placeholder="CO₂ kg" min="0" class="item-co2">
        <button class="remove-btn hidden">Remove</button>
      </div>
    </div>

    <button class="add-btn" id="add-item-btn">Add Another Item</button>
    <button class="add-btn" id="add-member-btn">Add Member</button>
  </div>

  <!-- Members list -->
  <div id="members-list" class="space-y-4"></div>

  <!-- Total family CO2 -->
  <div class="total-co2" id="total-co2">Total Family CO₂: 0 kg</div>

</div>

<script>
let familyMembers = [];

// Add new item input
document.getElementById('add-item-btn').addEventListener('click', () => {
  const container = document.getElementById('items-container');
  const div = document.createElement('div');
  div.className = 'flex gap-2';
  div.innerHTML = `
    <input type="text" placeholder="Item Name" class="item-name">
    <input type="number" placeholder="CO₂ kg" min="0" class="item-co2">
    <button class="remove-btn">Remove</button>
  `;
  container.appendChild(div);

  div.querySelector('.remove-btn').addEventListener('click', () => {
    div.remove();
  });
});

// Add member
document.getElementById('add-member-btn').addEventListener('click', () => {
  const name = document.getElementById('member-name').value.trim();
  if (!name) return alert('Enter member name!');
  
  const itemNames = Array.from(document.querySelectorAll('.item-name')).map(i => i.value.trim());
  const itemValues = Array.from(document.querySelectorAll('.item-co2')).map(i => Number(i.value));
  
  if (itemNames.some(n => !n) || itemValues.some(v => isNaN(v) || v < 0)) {
    return alert('Enter valid item names and CO₂ values!');
  }
  
  const items = itemNames.map((n,i) => ({ name: n, co2: itemValues[i] }));
  const totalCO2 = items.reduce((sum, itm) => sum + itm.co2, 0);
  
  familyMembers.push({ name, items, totalCO2 });
  
  document.getElementById('member-name').value = '';
  document.getElementById('items-container').innerHTML = `<div class="flex gap-2">
    <input type="text" placeholder="Item Name" class="item-name">
    <input type="number" placeholder="CO₂ kg" min="0" class="item-co2">
    <button class="remove-btn hidden">Remove</button>
  </div>`;
  
  renderMembers();
  updateTotalCO2();
});

// Render members
function renderMembers() {
  const container = document.getElementById('members-list');
  container.innerHTML = '';
  familyMembers.forEach((member, idx) => {
    const div = document.createElement('div');
    div.className = 'card space-y-2';
    div.innerHTML = `
      <div class="flex justify-between items-center">
        <h3 class="font-semibold text-green-700">${member.name}</h3>
        <button class="remove-btn" data-idx="${idx}">Remove Member</button>
      </div>
      <ul class="pl-4">
        ${member.items.map(itm => `<li>${itm.name}: ${itm.co2} kg CO₂</li>`).join('')}
      </ul>
      <div class="font-semibold text-right">Total: ${member.totalCO2.toFixed(2)} kg CO₂</div>
    `;
    container.appendChild(div);

    div.querySelector('.remove-btn').addEventListener('click', () => {
      familyMembers.splice(idx,1);
      renderMembers();
      updateTotalCO2();
    });
  });
}

// Update total family CO2
function updateTotalCO2() {
  const total = familyMembers.reduce((sum, m) => sum + m.totalCO2, 0);
  document.getElementById('total-co2').textContent = `Total Family CO₂: ${total.toFixed(2)} kg`;
}
</script>

</body>
</html>
