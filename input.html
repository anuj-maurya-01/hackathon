<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Eco Input — Unique EcoTrack</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-sky-50 to-emerald-50 min-h-screen text-slate-700">

  <main class="container mx-auto px-4 py-8">
    
    <!-- Go to Dashboard -->
    <div class="flex justify-end mb-6">
      <a href="dashboard.html" class="px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 transition">
        Go to Dashboard
      </a>
    </div>

    <h1 class="text-3xl font-bold mb-6 text-emerald-600">Enter Your Carbon Usage</h1>

    <form id="input-form" class="space-y-6 bg-white p-6 rounded-lg shadow-lg">

      <!-- Overall Usage Inputs -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input id="electricity" type="number" placeholder="Electricity (units)" class="p-3 border rounded focus:ring-2 focus:ring-emerald-400" />
        <input id="car-km" type="number" placeholder="Car distance (km)" class="p-3 border rounded focus:ring-2 focus:ring-emerald-400" />
        <input id="bike-km" type="number" placeholder="Bike distance (km)" class="p-3 border rounded focus:ring-2 focus:ring-emerald-400" />
        <input id="train-km" type="number" placeholder="Train distance (km)" class="p-3 border rounded focus:ring-2 focus:ring-emerald-400" />
        <input id="flight-km" type="number" placeholder="Flight distance (km)" class="p-3 border rounded focus:ring-2 focus:ring-emerald-400" />
        <input id="shopping-spend" type="number" placeholder="Shopping spend (₹)" class="p-3 border rounded focus:ring-2 focus:ring-emerald-400" />
      </div>

      <!-- Family Member Inputs -->
      <div class="space-y-2">
        <h2 class="font-semibold text-lg text-emerald-600">Family Member Carbon Usage</h2>
        <div id="member-list" class="space-y-2">
          <!-- Dynamic member inputs will appear here -->
        </div>
      </div>

      <div class="flex gap-3">
        <button type="submit" class="px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 transition">Calculate & Save</button>
        <button type="reset" class="px-4 py-2 border rounded hover:bg-slate-100 transition">Reset</button>
      </div>

      <div id="input-result" class="mt-4 hidden bg-green-50 p-4 rounded">
        <div class="text-sm text-slate-500">Calculated Total CO₂:</div>
        <div id="calculated" class="text-2xl font-bold mt-1 text-emerald-600">0 kg CO₂</div>
      </div>

    </form>
  </main>

  <script>
    const memberList = document.getElementById('member-list');
    const addMemberBtn = document.getElementById('add-member');
    let memberCount = 0;

    addMemberBtn.addEventListener('click', () => {
      memberCount++;
      const div = document.createElement('div');
      div.className = 'flex gap-2';
      div.innerHTML = `
        <input type="text" placeholder="Member Name" class="p-2 border rounded flex-1" />
        <input type="number" placeholder="CO₂ kg" class="p-2 border rounded w-32" />
        <button type="button" class="px-2 bg-red-500 text-white rounded hover:bg-red-600 remove-member">X</button>
      `;
      memberList.appendChild(div);

      div.querySelector('.remove-member').addEventListener('click', () => div.remove());
    });

    document.getElementById('input-form').addEventListener('submit', (e) => {
      e.preventDefault();

      const usageData = {
        electricity: Number(document.getElementById('electricity').value) || 0,
        carKm: Number(document.getElementById('car-km').value) || 0,
        bikeKm: Number(document.getElementById('bike-km').value) || 0,
        trainKm: Number(document.getElementById('train-km').value) || 0,
        flightKm: Number(document.getElementById('flight-km').value) || 0,
        shoppingSpend: Number(document.getElementById('shopping-spend').value) || 0,
        members: []
      };

      document.querySelectorAll('#member-list > div').forEach(div => {
        const name = div.querySelector('input[type="text"]').value.trim();
        const co2 = Number(div.querySelector('input[type="number"]').value) || 0;
        if(name) usageData.members.push({name, co2});
      });

      localStorage.setItem('usageData', JSON.stringify(usageData));

      // Show total CO2
      const multipliers = { electricity:0.82, car:0.2, bike:0, train:0.05, flight:0.25, shopping:0.005 };
      const total = usageData.electricity*multipliers.electricity +
                    usageData.carKm*multipliers.car +
                    usageData.bikeKm*multipliers.bike +
                    usageData.trainKm*multipliers.train +
                    usageData.flightKm*multipliers.flight +
                    usageData.shoppingSpend*multipliers.shopping +
                    usageData.members.reduce((acc,m)=>acc+m.co2,0);

      const resultEl = document.getElementById('input-result');
      const calcEl = document.getElementById('calculated');
      resultEl.classList.remove('hidden');
      calcEl.textContent = total.toFixed(2) + ' kg CO₂';
      alert('Data saved! Go to Dashboard to see your chart.');
    });
  </script>

</body>
</html>
